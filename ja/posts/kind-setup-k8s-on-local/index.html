<!doctype html><html lang=ja><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Kindã§kubernetes clusterã‚’localã§å‹•ã‹ã™æ–¹æ³• - evir35's blog</title><link rel=apple-touch-icon href=https://evir35.github.io/images/icons/icon-180x180.png sizes=180x180><link rel=icon href=https://evir35.github.io/images/icons/icon-32x32.png sizes=32x32 type=image/png><link rel=icon href=https://evir35.github.io/images/icons/icon-16x16.png sizes=16x16 type=image/png><link rel=icon href=https://evir35.github.io/images/icons/favicon.ico><link rel=manifest href=https://evir35.github.io/ja/manifest.json><meta name=keywords content><meta name=description content="Kindã§Kubernetes clusterã‚’localã§å‹•ã‹ã™æ–¹æ³• kindã¯Dockerã‚³ãƒ³ãƒ†ãƒŠã€Œnodesã€ã‚’ä½¿ã£ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã§Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’å‹•ã‹ã™ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ kindã¯ä¸»ã«Kubernetesè‡ªä½“ã®ãƒ†ã‚¹ãƒˆç”¨ã«è¨­è¨ˆã•ã‚Œã¾ã—ãŸãŒã€ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®é–‹ç™ºã‚„CIã«ä½¿ã†ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
kindã¯ä¸Šã®èª¬æ˜ã®ã‚ˆã†ã«localã§kubernetesã‚’testç”¨ã«ä½¿ã„ãŸã„æ™‚ã€dockerã‚’åˆ©ç”¨ã—ã¦kubernetes clusterã‚’ç°¡å˜ã«æ§‹ç¯‰ã§ãã‚‹ã‚ˆã†ã«åŠ©ã‘ã¦ãã‚Œã‚‹opensource toolã§ã™ã€‚åå‰ã®ç”±æ¥ã‚‚é¢ç™½ã„ã§ã™ãŒã€Kubernetes IN Dockerã‹ã‚‰K, IN, Dã‚’å–ã£ã¦ kindã«ãªã‚Šã¾ã—ãŸã€‚kind github repositoryã®descriptionã‚’ç¢ºèªã™ã‚‹ã¨åˆ†ã‹ã‚Šã¾ã™ã€‚
ä»Šæ—¥ã¯kind clusterã‚’localã§ç”Ÿæˆã—ã¦ã€nginxã‚’nodeportã§å…¬é–‹ã—ã€å‰Šé™¤ã™ã‚‹ã“ã¨ã§kindã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã¿ã¾ã™ã€‚
ç’°å¢ƒè¨­å®š ä»Šå›ã®postã§ä½¿ã£ã¦ã‚‹localç’°å¢ƒã¯ä¸‹è¨˜ã®ã‚ˆã†ãªç’°å¢ƒã§ã™ã€‚
Machine: Macbook Pro (16-inchim, 2021), Apple M1 Pro OS: MacOS Monterey 12.6.3 Install kind Macã®å ´åˆHomebrewã§ç°¡å˜ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¯èƒ½ã§ã™ãŒã€ç‰¹å®šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãŸã‚binaryã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.19.0/kind-darwin-arm64 chmod +x ./kind sudo mv ./kind /usr/local/bin/kind Check kind CLI brewã‚’ä½¿ã£ã¦kindãŒæ­£ã—ãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸã‹versionã¨CLI helpã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ä¸‹è¨˜ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚ŒãŸã‚‰kind CLIãŒã¡ã‚ƒã‚“ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸã¨ã¿ã¦ãã ã•ã„ã€‚
$ kind --version kind version 0.19.0 $ kind --help kind creates and manages local Kubernetes clusters using Docker container 'nodes' Usage: kind [command] Available Commands: build Build one of [node-image] completion Output shell completion code for the specified shell (bash, zsh or fish) create Creates one of [cluster] delete Deletes one of [cluster] export Exports one of [kubeconfig, logs] get Gets one of [clusters, nodes, kubeconfig] help Help about any command load Loads images into nodes version Prints the kind CLI version Flags: -h, --help help for kind --loglevel string DEPRECATED: see -v instead -q, --quiet silence all stderr output -v, --verbosity int32 info log verbosity, higher value produces more output --version version for kind Use &#34;kind [command] --help&#34; for more information about a command."><meta itemprop=name content="Kindã§kubernetes clusterã‚’localã§å‹•ã‹ã™æ–¹æ³•"><meta itemprop=description content="Kindã§Kubernetes clusterã‚’localã§å‹•ã‹ã™æ–¹æ³• kindã¯Dockerã‚³ãƒ³ãƒ†ãƒŠã€Œnodesã€ã‚’ä½¿ã£ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã§Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’å‹•ã‹ã™ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ kindã¯ä¸»ã«Kubernetesè‡ªä½“ã®ãƒ†ã‚¹ãƒˆç”¨ã«è¨­è¨ˆã•ã‚Œã¾ã—ãŸãŒã€ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®é–‹ç™ºã‚„CIã«ä½¿ã†ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
kindã¯ä¸Šã®èª¬æ˜ã®ã‚ˆã†ã«localã§kubernetesã‚’testç”¨ã«ä½¿ã„ãŸã„æ™‚ã€dockerã‚’åˆ©ç”¨ã—ã¦kubernetes clusterã‚’ç°¡å˜ã«æ§‹ç¯‰ã§ãã‚‹ã‚ˆã†ã«åŠ©ã‘ã¦ãã‚Œã‚‹opensource toolã§ã™ã€‚åå‰ã®ç”±æ¥ã‚‚é¢ç™½ã„ã§ã™ãŒã€Kubernetes IN Dockerã‹ã‚‰K, IN, Dã‚’å–ã£ã¦ kindã«ãªã‚Šã¾ã—ãŸã€‚kind github repositoryã®descriptionã‚’ç¢ºèªã™ã‚‹ã¨åˆ†ã‹ã‚Šã¾ã™ã€‚
ä»Šæ—¥ã¯kind clusterã‚’localã§ç”Ÿæˆã—ã¦ã€nginxã‚’nodeportã§å…¬é–‹ã—ã€å‰Šé™¤ã™ã‚‹ã“ã¨ã§kindã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã¿ã¾ã™ã€‚
ç’°å¢ƒè¨­å®š ä»Šå›ã®postã§ä½¿ã£ã¦ã‚‹localç’°å¢ƒã¯ä¸‹è¨˜ã®ã‚ˆã†ãªç’°å¢ƒã§ã™ã€‚
Machine: Macbook Pro (16-inchim, 2021), Apple M1 Pro OS: MacOS Monterey 12.6.3 Install kind Macã®å ´åˆHomebrewã§ç°¡å˜ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¯èƒ½ã§ã™ãŒã€ç‰¹å®šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãŸã‚binaryã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.19.0/kind-darwin-arm64 chmod +x ./kind sudo mv ./kind /usr/local/bin/kind Check kind CLI brewã‚’ä½¿ã£ã¦kindãŒæ­£ã—ãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸã‹versionã¨CLI helpã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ä¸‹è¨˜ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚ŒãŸã‚‰kind CLIãŒã¡ã‚ƒã‚“ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸã¨ã¿ã¦ãã ã•ã„ã€‚
$ kind --version kind version 0.19.0 $ kind --help kind creates and manages local Kubernetes clusters using Docker container 'nodes' Usage: kind [command] Available Commands: build Build one of [node-image] completion Output shell completion code for the specified shell (bash, zsh or fish) create Creates one of [cluster] delete Deletes one of [cluster] export Exports one of [kubeconfig, logs] get Gets one of [clusters, nodes, kubeconfig] help Help about any command load Loads images into nodes version Prints the kind CLI version Flags: -h, --help help for kind --loglevel string DEPRECATED: see -v instead -q, --quiet silence all stderr output -v, --verbosity int32 info log verbosity, higher value produces more output --version version for kind Use &#34;kind [command] --help&#34; for more information about a command."><meta itemprop=datePublished content="2022-08-16T22:34:50+09:00"><meta itemprop=dateModified content="2022-08-16T22:34:50+09:00"><meta itemprop=wordCount content="688"><meta itemprop=keywords content="container,kubernetes,kind,"><meta property="og:title" content="Kindã§kubernetes clusterã‚’localã§å‹•ã‹ã™æ–¹æ³•"><meta property="og:description" content="Kindã§Kubernetes clusterã‚’localã§å‹•ã‹ã™æ–¹æ³• kindã¯Dockerã‚³ãƒ³ãƒ†ãƒŠã€Œnodesã€ã‚’ä½¿ã£ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã§Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’å‹•ã‹ã™ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ kindã¯ä¸»ã«Kubernetesè‡ªä½“ã®ãƒ†ã‚¹ãƒˆç”¨ã«è¨­è¨ˆã•ã‚Œã¾ã—ãŸãŒã€ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®é–‹ç™ºã‚„CIã«ä½¿ã†ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
kindã¯ä¸Šã®èª¬æ˜ã®ã‚ˆã†ã«localã§kubernetesã‚’testç”¨ã«ä½¿ã„ãŸã„æ™‚ã€dockerã‚’åˆ©ç”¨ã—ã¦kubernetes clusterã‚’ç°¡å˜ã«æ§‹ç¯‰ã§ãã‚‹ã‚ˆã†ã«åŠ©ã‘ã¦ãã‚Œã‚‹opensource toolã§ã™ã€‚åå‰ã®ç”±æ¥ã‚‚é¢ç™½ã„ã§ã™ãŒã€Kubernetes IN Dockerã‹ã‚‰K, IN, Dã‚’å–ã£ã¦ kindã«ãªã‚Šã¾ã—ãŸã€‚kind github repositoryã®descriptionã‚’ç¢ºèªã™ã‚‹ã¨åˆ†ã‹ã‚Šã¾ã™ã€‚
ä»Šæ—¥ã¯kind clusterã‚’localã§ç”Ÿæˆã—ã¦ã€nginxã‚’nodeportã§å…¬é–‹ã—ã€å‰Šé™¤ã™ã‚‹ã“ã¨ã§kindã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã¿ã¾ã™ã€‚
ç’°å¢ƒè¨­å®š ä»Šå›ã®postã§ä½¿ã£ã¦ã‚‹localç’°å¢ƒã¯ä¸‹è¨˜ã®ã‚ˆã†ãªç’°å¢ƒã§ã™ã€‚
Machine: Macbook Pro (16-inchim, 2021), Apple M1 Pro OS: MacOS Monterey 12.6.3 Install kind Macã®å ´åˆHomebrewã§ç°¡å˜ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¯èƒ½ã§ã™ãŒã€ç‰¹å®šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãŸã‚binaryã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.19.0/kind-darwin-arm64 chmod +x ./kind sudo mv ./kind /usr/local/bin/kind Check kind CLI brewã‚’ä½¿ã£ã¦kindãŒæ­£ã—ãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸã‹versionã¨CLI helpã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ä¸‹è¨˜ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚ŒãŸã‚‰kind CLIãŒã¡ã‚ƒã‚“ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸã¨ã¿ã¦ãã ã•ã„ã€‚
$ kind --version kind version 0.19.0 $ kind --help kind creates and manages local Kubernetes clusters using Docker container 'nodes' Usage: kind [command] Available Commands: build Build one of [node-image] completion Output shell completion code for the specified shell (bash, zsh or fish) create Creates one of [cluster] delete Deletes one of [cluster] export Exports one of [kubeconfig, logs] get Gets one of [clusters, nodes, kubeconfig] help Help about any command load Loads images into nodes version Prints the kind CLI version Flags: -h, --help help for kind --loglevel string DEPRECATED: see -v instead -q, --quiet silence all stderr output -v, --verbosity int32 info log verbosity, higher value produces more output --version version for kind Use &#34;kind [command] --help&#34; for more information about a command."><meta property="og:type" content="article"><meta property="og:url" content="https://evir35.github.io/ja/posts/kind-setup-k8s-on-local/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-16T22:34:50+09:00"><meta property="article:modified_time" content="2022-08-16T22:34:50+09:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Kindã§kubernetes clusterã‚’localã§å‹•ã‹ã™æ–¹æ³•"><meta name=twitter:description content="Kindã§Kubernetes clusterã‚’localã§å‹•ã‹ã™æ–¹æ³• kindã¯Dockerã‚³ãƒ³ãƒ†ãƒŠã€Œnodesã€ã‚’ä½¿ã£ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã§Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’å‹•ã‹ã™ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ kindã¯ä¸»ã«Kubernetesè‡ªä½“ã®ãƒ†ã‚¹ãƒˆç”¨ã«è¨­è¨ˆã•ã‚Œã¾ã—ãŸãŒã€ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®é–‹ç™ºã‚„CIã«ä½¿ã†ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
kindã¯ä¸Šã®èª¬æ˜ã®ã‚ˆã†ã«localã§kubernetesã‚’testç”¨ã«ä½¿ã„ãŸã„æ™‚ã€dockerã‚’åˆ©ç”¨ã—ã¦kubernetes clusterã‚’ç°¡å˜ã«æ§‹ç¯‰ã§ãã‚‹ã‚ˆã†ã«åŠ©ã‘ã¦ãã‚Œã‚‹opensource toolã§ã™ã€‚åå‰ã®ç”±æ¥ã‚‚é¢ç™½ã„ã§ã™ãŒã€Kubernetes IN Dockerã‹ã‚‰K, IN, Dã‚’å–ã£ã¦ kindã«ãªã‚Šã¾ã—ãŸã€‚kind github repositoryã®descriptionã‚’ç¢ºèªã™ã‚‹ã¨åˆ†ã‹ã‚Šã¾ã™ã€‚
ä»Šæ—¥ã¯kind clusterã‚’localã§ç”Ÿæˆã—ã¦ã€nginxã‚’nodeportã§å…¬é–‹ã—ã€å‰Šé™¤ã™ã‚‹ã“ã¨ã§kindã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã¿ã¾ã™ã€‚
ç’°å¢ƒè¨­å®š ä»Šå›ã®postã§ä½¿ã£ã¦ã‚‹localç’°å¢ƒã¯ä¸‹è¨˜ã®ã‚ˆã†ãªç’°å¢ƒã§ã™ã€‚
Machine: Macbook Pro (16-inchim, 2021), Apple M1 Pro OS: MacOS Monterey 12.6.3 Install kind Macã®å ´åˆHomebrewã§ç°¡å˜ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¯èƒ½ã§ã™ãŒã€ç‰¹å®šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãŸã‚binaryã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚
curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.19.0/kind-darwin-arm64 chmod +x ./kind sudo mv ./kind /usr/local/bin/kind Check kind CLI brewã‚’ä½¿ã£ã¦kindãŒæ­£ã—ãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸã‹versionã¨CLI helpã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ä¸‹è¨˜ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚ŒãŸã‚‰kind CLIãŒã¡ã‚ƒã‚“ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸã¨ã¿ã¦ãã ã•ã„ã€‚
$ kind --version kind version 0.19.0 $ kind --help kind creates and manages local Kubernetes clusters using Docker container 'nodes' Usage: kind [command] Available Commands: build Build one of [node-image] completion Output shell completion code for the specified shell (bash, zsh or fish) create Creates one of [cluster] delete Deletes one of [cluster] export Exports one of [kubeconfig, logs] get Gets one of [clusters, nodes, kubeconfig] help Help about any command load Loads images into nodes version Prints the kind CLI version Flags: -h, --help help for kind --loglevel string DEPRECATED: see -v instead -q, --quiet silence all stderr output -v, --verbosity int32 info log verbosity, higher value produces more output --version version for kind Use &#34;kind [command] --help&#34; for more information about a command."><meta property="og:image" content="https://evir35.github.io/images/logo.png"><meta name=twitter:image content="https://evir35.github.io/images/logo.png"><link rel=stylesheet href=https://evir35.github.io/css/main.min.24196952817c68c8b90d8fa573d560fa62766baa0622bdc0e862255f4a4d1307.css integrity="sha256-JBlpUoF8aMi5DY+lc9Vg+mJ2a6oGIr3A6GIlX0pNEwc=" crossorigin=anonymous><link rel=stylesheet href=https://evir35.github.io/css/viewer.min.3d228794bcedbbfa0412beb8fbc1ec6973202945e42af7004f742a4d7bd620ab.css integrity="sha256-PSKHlLztu/oEEr64+8HsaXMgKUXkKvcAT3QqTXvWIKs=" crossorigin=anonymous></head><body><script>const items=["mode","palette"];items.forEach(function(e){const t=localStorage.getItem("hbs-"+e);t&&document.body.parentElement.setAttribute("data-"+e,t)})</script><header><nav class="navbar top-app-bar top-app-bar-expand-lg fixed-top"><div class=container><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<i class="fas fa-bars"></i>
</button><a class="navbar-brand flex-grow-1 flex-lg-grow-0 text-center text-lg-start mx-auto me-lg-3" href=https://evir35.github.io/ja/><img class=logo alt=Logo src=https://evir35.github.io/images/logo.webp loading=lazy width=600 height=600>
evir35's blog</a><div class="offcanvas offcanvas-bottom surface" tabindex=-1 id=offcanvasSocialShare aria-labelledby=offcanvasSocialShare><div class=offcanvas-header><h3 class=offcanvas-title>Share</h3><button type=button class="btn btn-sm btn-outline-primary" data-bs-dismiss=offcanvas aria-label=Close>
<i class="fas fa-times"></i></button></div><div class=offcanvas-body><a class="btn btn-sm btn-outline-primary social-share-button" rel="noopener noreferrer" aria-label="Twitter Share Button" target=_blank href="https://twitter.com/intent/tweet?title=Kind%e3%81%a7kubernetes%20cluster%e3%82%92local%e3%81%a7%e5%8b%95%e3%81%8b%e3%81%99%e6%96%b9%e6%b3%95&url=https%3a%2f%2fevir35.github.io%2fja%2fposts%2fkind-setup-k8s-on-local%2f"><i class="fab fa-fw fa-twitter"></i> Twitter</a>
<a class="btn btn-sm btn-outline-primary social-share-button" rel="noopener noreferrer" aria-label="Facebook Share Button" target=_blank href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fevir35.github.io%2fja%2fposts%2fkind-setup-k8s-on-local%2f"><i class="fab fa-fw fa-facebook-f"></i> Facebook</a></div></div><button class=navbar-settings type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasSettings aria-controls=offcanvasSettings aria-label="Toggle settings">
<i class="fas fa-ellipsis-v"></i></button><div class="offcanvas offcanvas-end surface h-100" tabindex=-1 id=offcanvasSettings aria-labelledby=offcanvasSettings><div class=offcanvas-header><h3 class=offcanvas-title>Settings</h3><button type=button class="btn btn-sm btn-outline-primary" data-bs-dismiss=offcanvas aria-label=Close>
<i class="fas fa-times"></i></button></div><div class="offcanvas-body d-flex flex-column"><section class=setting><form class=row><div class=col-auto><label for=fontSize class=form-label><i class="fas fa-fw fa-language"></i> Language</label></div><div class="col-auto ms-auto"><div class=dropdown><a class="btn btn-sm btn-outline-primary dropdown-toggle" href=# id=languageDropdown role=button data-bs-toggle=dropdown aria-expanded=false>æ—¥æœ¬èª</a><ul class="dropdown-menu dropdown-menu-end" aria-labelledby=languageDropdown><li><a class=dropdown-item href=https://evir35.github.io/ko/>í•œêµ­ì–´</a></li><li><a class=dropdown-item href=https://evir35.github.io/>English</a></li></ul></div></div></form></section><section class=setting><form class=row><div class=col-auto><label><i class="fas fa-fw fa-adjust"></i> Mode</label></div><div class="col-auto ms-auto"><div class="form-check form-switch"><input class=form-check-input type=checkbox id=modeSwitcher></div></div></form></section><section class="setting actions d-flex justify-content-around mt-auto overflow-auto"><a role=button class="action action-go-back" href="javascript: window.history.back();"><span class=action-icon><i class="fas fa-2x fa-arrow-left"></i></span> Go back</a>
<a role=button class="action action-reload-page"><span class=action-icon><i class="fas fa-2x fa-redo-alt"></i></span> Reload</a>
<a role=button class="action action-copy-url"><span class=action-icon><i class="fas fa-2x fa-link"></i></span> Copy URL
</a><a class="action action-social-share" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasSocialShare aria-controls=offcanvasSocialShare aria-label="Toggle social share"><span class=action-icon><i class="fas fa-2x fa-share-alt"></i></span> Share</a></section></div></div><div class="collapse navbar-collapse" tabindex=-1 id=navbarSupportedContent aria-labelledby=navbarSupportedContent><form class="search-bar my-1" action=https://evir35.github.io/ja/search><div class="input-group input-group-sm"><span class="btn btn-search disabled position-absolute left-0"><i class="fas fa-fw fa-search"></i></span>
<input class="form-control rounded-pill" name=q type=search aria-label=Search></div></form><ul class="navbar-nav ms-auto"></ul></div></div></nav></header><main role=main class=container><div class="row content"><div class=col-lg-8><div class=container><nav class="row card component" aria-label=breadcrumb><div class=card-body><ol class=breadcrumb><li class=breadcrumb-item><a href=https://evir35.github.io/ja/>Home</a></li><li class=breadcrumb-item><a href=https://evir35.github.io/ja/posts/>Posts</a></li><li class="breadcrumb-item active">Kindã§kubernetes clusterã‚’localã§å‹•ã‹ã™æ–¹æ³•</li></ol></div></nav><div class=post-panel-wrapper><div class="d-flex flex-column component rounded post-panel"><a class="action action-panel-toggler" role=button title="Panel toggler"><i class="fas fa-fw fa-chevron-circle-down"></i></a>
<a id=sidebarToggler class="action d-none d-lg-block" role=button title="Sidebar toggler"><i class="fas fa-fw fa-expand-alt" data-fa-transform=rotate-45></i></a><div class="post-translations nav-item dropdown dropstart action"><a class="nav-link p-0" data-bs-toggle=dropdown href=# role=button aria-haspopup=true aria-expanded=false aria-label="Translations dropdown menu" title=Translations><i class="fas fa-fw fa-language"></i></a><div class=dropdown-menu><a class="dropdown-item post-translation" href=https://evir35.github.io/ko/posts/kind-setup-k8s-on-local/>í•œêµ­ì–´</a><a class="dropdown-item post-translation" href=https://evir35.github.io/posts/kind-setup-k8s-on-local/>English</a></div></div><a class=action href=#post-comments role=button aria-label=Comments title=Comments><i class="fas fa-fw fa-comments"></i></a>
<a class=action href=#postTOC aria-controls="Table of contents" role=button title="Table of contents"><i class="fas fa-fw fa-list-alt"></i></a></div></div><article class="row card component mb-4 post"><div class=card-header><h1 class="card-title post-title">Kindã§kubernetes clusterã‚’localã§å‹•ã‹ã™æ–¹æ³•</h1></div><div class=card-body><div class=post-meta><span class=post-date title="created on 2022-08-16 13:34:50 +0000 UTC.">8æœˆ 16, 2022
</span><span class=post-reading-time>4 min read
</span><span class=post-taxonomies><a href=https://evir35.github.io/ja/tags/container/ class="badge post-taxonomy">container</a><a href=https://evir35.github.io/ja/tags/kubernetes/ class="badge post-taxonomy">kubernetes</a><a href=https://evir35.github.io/ja/tags/kind/ class="badge post-taxonomy">kind</a></span></div><div class="post-content mb-3"><h2 id=kindã§kubernetes-clusterã‚’localã§å‹•ã‹ã™æ–¹æ³•>Kindã§Kubernetes clusterã‚’localã§å‹•ã‹ã™æ–¹æ³•<a class="anchor ms-1" href=#kindã§kubernetes-clusterã‚’localã§å‹•ã‹ã™æ–¹æ³•><i class="fas fa-link"></i></a></h2><blockquote><p>kindã¯Dockerã‚³ãƒ³ãƒ†ãƒŠã€Œnodesã€ã‚’ä½¿ã£ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã§Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ã‚’å‹•ã‹ã™ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ kindã¯ä¸»ã«Kubernetesè‡ªä½“ã®ãƒ†ã‚¹ãƒˆç”¨ã«è¨­è¨ˆã•ã‚Œã¾ã—ãŸãŒã€ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®é–‹ç™ºã‚„CIã«ä½¿ã†ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p></blockquote><p><a href=https://kind.sigs.k8s.io/ target=_blank rel="noopener noreferrer">kind</a>ã¯ä¸Šã®èª¬æ˜ã®ã‚ˆã†ã«localã§kubernetesã‚’testç”¨ã«ä½¿ã„ãŸã„æ™‚ã€dockerã‚’åˆ©ç”¨ã—ã¦kubernetes clusterã‚’ç°¡å˜ã«æ§‹ç¯‰ã§ãã‚‹ã‚ˆã†ã«åŠ©ã‘ã¦ãã‚Œã‚‹opensource toolã§ã™ã€‚åå‰ã®ç”±æ¥ã‚‚é¢ç™½ã„ã§ã™ãŒã€<code>Kubernetes IN Docker</code>ã‹ã‚‰<code>K</code>, <code>IN</code>, <code>D</code>ã‚’å–ã£ã¦ <code>kind</code>ã«ãªã‚Šã¾ã—ãŸã€‚<a href=https://github.com/kubernetes-sigs/kind/ target=_blank rel="noopener noreferrer">kind github repository</a>ã®descriptionã‚’ç¢ºèªã™ã‚‹ã¨åˆ†ã‹ã‚Šã¾ã™ã€‚</p><p>ä»Šæ—¥ã¯kind clusterã‚’localã§ç”Ÿæˆã—ã¦ã€nginxã‚’nodeportã§å…¬é–‹ã—ã€å‰Šé™¤ã™ã‚‹ã“ã¨ã§kindã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã¿ã¾ã™ã€‚</p><h2 id=ç’°å¢ƒè¨­å®š>ç’°å¢ƒè¨­å®š<a class="anchor ms-1" href=#ç’°å¢ƒè¨­å®š><i class="fas fa-link"></i></a></h2><p>ä»Šå›ã®postã§ä½¿ã£ã¦ã‚‹localç’°å¢ƒã¯ä¸‹è¨˜ã®ã‚ˆã†ãªç’°å¢ƒã§ã™ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>Machine: Macbook Pro (16-inchim, 2021), Apple M1 Pro
</span></span><span style=display:flex><span>OS: MacOS Monterey 12.6.3
</span></span></code></pre></div><h2 id=install-kind>Install kind<a class="anchor ms-1" href=#install-kind><i class="fas fa-link"></i></a></h2><p>Macã®å ´åˆ<a href=https://brew.sh/index_ko target=_blank rel="noopener noreferrer">Homebrew</a>ã§ç°¡å˜ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¯èƒ½ã§ã™ãŒã€ç‰¹å®šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãŸã‚binaryã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>curl -Lo ./kind https://kind.sigs.k8s.io/dl/v0.19.0/kind-darwin-arm64
</span></span><span style=display:flex><span>chmod +x ./kind
</span></span><span style=display:flex><span>sudo mv ./kind /usr/local/bin/kind
</span></span></code></pre></div><h3 id=check-kind-cli>Check kind CLI<a class="anchor ms-1" href=#check-kind-cli><i class="fas fa-link"></i></a></h3><p>brewã‚’ä½¿ã£ã¦kindãŒæ­£ã—ãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸã‹versionã¨CLI helpã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ä¸‹è¨˜ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚ŒãŸã‚‰kind CLIãŒã¡ã‚ƒã‚“ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸã¨ã¿ã¦ãã ã•ã„ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ kind --version
</span></span><span style=display:flex><span>kind version 0.19.0
</span></span><span style=display:flex><span>$ kind --help
</span></span><span style=display:flex><span>kind creates and manages local Kubernetes clusters using Docker container <span style=color:#e6db74>&#39;nodes&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Usage:
</span></span><span style=display:flex><span>  kind <span style=color:#f92672>[</span>command<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Available Commands:
</span></span><span style=display:flex><span>  build       Build one of <span style=color:#f92672>[</span>node-image<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  completion  Output shell completion code <span style=color:#66d9ef>for</span> the specified shell <span style=color:#f92672>(</span>bash, zsh or fish<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  create      Creates one of <span style=color:#f92672>[</span>cluster<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  delete      Deletes one of <span style=color:#f92672>[</span>cluster<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  export      Exports one of <span style=color:#f92672>[</span>kubeconfig, logs<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  get         Gets one of <span style=color:#f92672>[</span>clusters, nodes, kubeconfig<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  help        Help about any command
</span></span><span style=display:flex><span>  load        Loads images into nodes
</span></span><span style=display:flex><span>  version     Prints the kind CLI version
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Flags:
</span></span><span style=display:flex><span>  -h, --help              help <span style=color:#66d9ef>for</span> kind
</span></span><span style=display:flex><span>      --loglevel string   DEPRECATED: see -v instead
</span></span><span style=display:flex><span>  -q, --quiet             silence all stderr output
</span></span><span style=display:flex><span>  -v, --verbosity int32   info log verbosity, higher value produces more output
</span></span><span style=display:flex><span>      --version           version <span style=color:#66d9ef>for</span> kind
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Use <span style=color:#e6db74>&#34;kind [command] --help&#34;</span> <span style=color:#66d9ef>for</span> more information about a command.
</span></span></code></pre></div><h2 id=create-cluster>Create Cluster<a class="anchor ms-1" href=#create-cluster><i class="fas fa-link"></i></a></h2><p>ä¸‹è¨˜ã®ã‚ˆã†ã«<code>kind create cluster</code>ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹ã¨ç°¡å˜ã«clusterã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ kind create cluster
</span></span><span style=display:flex><span>Creating cluster <span style=color:#e6db74>&#34;kind&#34;</span> ...
</span></span><span style=display:flex><span> âœ“ Ensuring node image <span style=color:#f92672>(</span>kindest/node:v1.27.1<span style=color:#f92672>)</span> ğŸ–¼ 
</span></span><span style=display:flex><span> âœ“ Preparing nodes ğŸ“¦  
</span></span><span style=display:flex><span> âœ“ Writing configuration ğŸ“œ 
</span></span><span style=display:flex><span> âœ“ Starting control-plane ğŸ•¹ï¸ 
</span></span><span style=display:flex><span> âœ“ Installing CNI ğŸ”Œ 
</span></span><span style=display:flex><span> âœ“ Installing StorageClass ğŸ’¾ 
</span></span><span style=display:flex><span>Set kubectl context to <span style=color:#e6db74>&#34;kind-kind&#34;</span>
</span></span><span style=display:flex><span>You can now use your cluster with:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kubectl cluster-info --context kind-kind
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Have a question, bug, or feature request? Let us know! https://kind.sigs.k8s.io/#community ğŸ™‚
</span></span></code></pre></div><h3 id=kubernetes-cluster-info-and-nodesã®ç¢ºèª>kubernetes cluster-info and nodesã®ç¢ºèª<a class="anchor ms-1" href=#kubernetes-cluster-info-and-nodesã®ç¢ºèª><i class="fas fa-link"></i></a></h3><p>kind clusterç”Ÿæˆå¾Œã€è‡ªå‹•çš„ã«contextãŒ<code>kind-kind</code>ã«å¤‰æ›´ã•ã‚Œã¦<code>kubectl cluster-info</code>ã€<code>kubectl get nodes -owide</code>ã§ç¢ºèªã—ã¦ã¿ã‚‹ã¨ã€ã¡ã‚ƒã‚“ã¨kubernetes clusterãŒç”Ÿæˆã•ã‚ŒãŸã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ kubectl cluster-info
</span></span><span style=display:flex><span>Kubernetes control plane is running at https://127.0.0.1:58181
</span></span><span style=display:flex><span>CoreDNS is running at https://127.0.0.1:58181/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>To further debug and diagnose cluster problems, use <span style=color:#e6db74>&#39;kubectl cluster-info dump&#39;</span>.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ kubectl get nodes -owide       
</span></span><span style=display:flex><span>NAME                 STATUS   ROLES           AGE   VERSION   INTERNAL-IP   EXTERNAL-IP   OS-IMAGE                         KERNEL-VERSION   CONTAINER-RUNTIME
</span></span><span style=display:flex><span>kind-control-plane   Ready    control-plane   17m   v1.27.1   172.18.0.2    &lt;none&gt;        Debian GNU/Linux <span style=color:#ae81ff>11</span> <span style=color:#f92672>(</span>bullseye<span style=color:#f92672>)</span>   5.15.82-0-virt   containerd://1.6.21
</span></span></code></pre></div><h3 id=check-docker-containers>Check docker containers<a class="anchor ms-1" href=#check-docker-containers><i class="fas fa-link"></i></a></h3><p>ä¸‹è¨˜ã®ã‚ˆã†ã«ç¾åœ¨å‹•ã„ã¦ã‚‹containerã‚’ç¢ºèªã™ã‚‹ã¨<code>kindset/node</code>imageã‚’ä½¿ã£ã¦ã‚‹containerä¸€ã¤ã ã‘å‹•ã„ã¦ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ docker ps
</span></span><span style=display:flex><span>CONTAINER ID   IMAGE                  COMMAND                  CREATED         STATUS         PORTS                       NAMES
</span></span><span style=display:flex><span>8a885e2d2b28   kindest/node:v1.27.1   <span style=color:#e6db74>&#34;/usr/local/bin/entrâ€¦&#34;</span>   <span style=color:#ae81ff>2</span> minutes ago   Up <span style=color:#ae81ff>2</span> minutes   127.0.0.1:58181-&gt;6443/tcp   kind-control-plane
</span></span></code></pre></div><h2 id=metallbã§kindç”¨ã®loadbalancerã‚’è¨­å®šã™ã‚‹>metalLBã§kindç”¨ã®LoadBalancerã‚’è¨­å®šã™ã‚‹<a class="anchor ms-1" href=#metallbã§kindç”¨ã®loadbalancerã‚’è¨­å®šã™ã‚‹><i class="fas fa-link"></i></a></h2><h3 id=dockerãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç”¨ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«ã®è¨­å®š>dockerãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç”¨ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«ã®è¨­å®š<a class="anchor ms-1" href=#dockerãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç”¨ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«ã®è¨­å®š><i class="fas fa-link"></i></a></h3><ul><li>Reference: <a href=https://opencredo.com/blogs/building-the-best-kubernetes-test-cluster-on-macos/ target=_blank rel="noopener noreferrer">https://opencredo.com/blogs/building-the-best-kubernetes-test-cluster-on-macos/</a></li></ul><p>ä¸Šã®blogã‚’å‚è€ƒã—ã¦macbookã¨colima machineã®è¨­å®šã‚’ã—ã¾ã™ã€‚ (ç§ãŒä½œã£ãŸscriptã‚’ä½¿ã£ã¦ä¸‹è¨˜ã®commandã‚’å®Ÿè¡Œã—ãŸã‚‰ã€ä¸Šã®è¨­å®šã‚’è‡ªå‹•ã§ã§ãã¾ã™)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>curl -L https://gist.githubusercontent.com/evir35/6fbd7382629e60bef08ac39e1968f2df/raw/c638578991b4a8b16304dde327f9621dae2bc03c/colima-network-setup.sh 2&gt;/dev/null | bash -- &lt;&amp;<span style=color:#ae81ff>1</span>
</span></span></code></pre></div><h3 id=install-metallb-on-kind-cluster>Install metalLB on kind cluster<a class="anchor ms-1" href=#install-metallb-on-kind-cluster><i class="fas fa-link"></i></a></h3><p>ä¸‹è¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ã¦kind clusterã«metalLBã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚(<a href=https://kind.sigs.k8s.io/docs/user/loadbalancer/ target=_blank rel="noopener noreferrer">å‚è€ƒ</a>)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>kubectl apply -f https://raw.githubusercontent.com/metallb/metallb/v0.13.7/config/manifests/metallb-native.yaml
</span></span><span style=display:flex><span>kubectl wait --namespace metallb-system <span style=color:#ae81ff>\ </span>...
</span></span><span style=display:flex><span>                --for<span style=color:#f92672>=</span>condition<span style=color:#f92672>=</span>ready pod <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>                --selector<span style=color:#f92672>=</span>app<span style=color:#f92672>=</span>metallb <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>                --timeout<span style=color:#f92672>=</span>90s
</span></span></code></pre></div><h3 id=docker-kind-network-ip-rangeç¢ºèª>Docker kind network IP rangeç¢ºèª<a class="anchor ms-1" href=#docker-kind-network-ip-rangeç¢ºèª><i class="fas fa-link"></i></a></h3><p>ä¸‹è¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã§ç¢ºèªã—ãŸã‚‰ã€ç§ã®localã®å ´åˆ<code>172.18.0.0.0/16</code>IP rangeãŒkind networkã§ä½¿ãˆã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ docker network inspect -f <span style=color:#e6db74>&#39;{{.IPAM.Config}}&#39;</span>kind
</span></span><span style=display:flex><span><span style=color:#f92672>[{</span>172.18.0.0.0/16 172.18.0.1 map<span style=color:#f92672>[]}]</span>.<span style=color:#f92672>{</span>fc00:f853:ccd:e793::/64 map<span style=color:#f92672>[]}]]</span>.
</span></span></code></pre></div><h3 id=metallb-ip-rangeè¨­å®š>MetalLB IP rangeè¨­å®š<a class="anchor ms-1" href=#metallb-ip-rangeè¨­å®š><i class="fas fa-link"></i></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF | kubectl apply -f -
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: metallb.io/v1beta1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: IPAddressPool
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: example
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  namespace: metallb-system
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  addresses:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  - 172.18.255.200-172.18.255.250 # Please update this addresses to your IP range
</span></span></span><span style=display:flex><span><span style=color:#e6db74>---
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: metallb.io/v1beta1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: L2Advertisement
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: empty
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  namespace: metallb-system
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><h3 id=metallb-loadbalancerã‚’ä½¿ã†example-resourceã‚’ç”Ÿæˆã—ã¾ã™>MetalLB LoadBalancerã‚’ä½¿ã†example resourceã‚’ç”Ÿæˆã—ã¾ã™ã€‚<a class="anchor ms-1" href=#metallb-loadbalancerã‚’ä½¿ã†example-resourceã‚’ç”Ÿæˆã—ã¾ã™><i class="fas fa-link"></i></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>cat <span style=color:#e6db74>&lt;&lt;EOF | kubectl apply -f -
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: Pod
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: v1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: foo-app
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  labels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    app: http-echo
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  containers:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  - name: foo-app
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    image: strm/helloworld-http
</span></span></span><span style=display:flex><span><span style=color:#e6db74>---
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: Pod
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: v1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: bar-app
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  labels:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    app: http-echo
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  containers:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  - name: bar-app
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    image: strm/helloworld-http
</span></span></span><span style=display:flex><span><span style=color:#e6db74>---
</span></span></span><span style=display:flex><span><span style=color:#e6db74>kind: Service
</span></span></span><span style=display:flex><span><span style=color:#e6db74>apiVersion: v1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>metadata:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  name: foo-service
</span></span></span><span style=display:flex><span><span style=color:#e6db74>spec:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  type: LoadBalancer
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  selector:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    app: http-echo
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  ports:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  # Default port used by the image
</span></span></span><span style=display:flex><span><span style=color:#e6db74>  - port: 80
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><h3 id=test-metallb>Test metalLB<a class="anchor ms-1" href=#test-metallb><i class="fas fa-link"></i></a></h3><p>ç”Ÿæˆã•ã‚ŒãŸServiceã§LBã®IPã‚’ç¢ºèªã—ã¾ã™ã€‚ç§ã®å ´åˆã¯<code>172.18.255.200</code>IPã§LBãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ kubectl get service
</span></span><span style=display:flex><span>NAME          TYPE           CLUSTER-IP     EXTERNAL-IP      PORT<span style=color:#f92672>(</span>S<span style=color:#f92672>)</span>        AGE
</span></span><span style=display:flex><span>foo-service   LoadBalancer   10.96.220.49   172.18.255.200   80:30790/TCP   15d
</span></span><span style=display:flex><span>kubernetes    ClusterIP      10.96.0.1      &lt;none&gt;           443/TCP        15d
</span></span></code></pre></div><p>ã“ã®IPã§curlã‚’ã—ã¦ã¿ã‚‹ã¨ã€ä¸‹è¨˜ã®ã‚ˆã†ã«hostnameãŒäº¤äº’ã«å‡ºã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ curl 172.18.255.200
</span></span><span style=display:flex><span>&lt;html&gt;&lt;head&gt;&lt;title&gt;HTTP Hello World&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Hello from bar-app&lt;/h1&gt;&lt;/body&gt;&lt;/html
</span></span><span style=display:flex><span>$ curl 172.18.255.200
</span></span><span style=display:flex><span>&lt;html&gt;&lt;head&gt;&lt;title&gt;HTTP Hello World&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Hello from foo-app&lt;/h1&gt;&lt;/body&gt;&lt;/html
</span></span></code></pre></div><h2 id=conclusion>Conclusion<a class="anchor ms-1" href=#conclusion><i class="fas fa-link"></i></a></h2><p>colimaã¨kindã‚’ä½¿ã£ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã§k8s clusterã‚’æ§‹ç¯‰ã—ã¦ã€metalLBã‚’ä½¿ã£ã¦Loadbalancer Typeã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’æ´»ç”¨ã§ãã‚‹ã‚ˆã†ã«æ§‹æˆã—ã¦ã¿ã¾ã—ãŸã€‚ ã¾ã networké–¢é€£ã®è¨­å®šãŒå¿…è¦ãªç‚¹ãŒå°‘ã—æ®‹å¿µã§ã™ãŒã€ç°¡å˜ãªãƒ†ã‚¹ãƒˆã®ãŸã‚localã§k8sã‚’èµ·å‹•ã—ã¦ãƒ†ã‚¹ãƒˆã—ãŸå¾Œã€å‰Šé™¤ã—ã¦ã€æ–°ã—ãä½œã‚Šç›´ã™æ–¹æ³•ã§ãƒ†ã‚¹ãƒˆãŒã§ãã‚‹ã®ã§ã€ã„ã„æ–¹æ³•ã ã¨æ€ã„ã¾ã™ã€‚</p><h2 id=reference>Reference<a class="anchor ms-1" href=#reference><i class="fas fa-link"></i></a></h2><ul><li>colima:<a href=https://github.com/abiosoft/colima target=_blank rel="noopener noreferrer">https://github.com/abiosoft/colima</a></li><li>kind:<a href=https://kind.sigs.k8s.io/ target=_blank rel="noopener noreferrer">https://kind.sigs.k8s.io/</a></li><li>metallb:<a href=https://metallb.universe.tf/ target=_blank rel="noopener noreferrer">https://metallb.universe.tf/</a></li><li>Building the best Kubernetes test cluster on MacOS:<a href=https://opencredo.com/blogs/building-the-best-kubernetes-test-cluster-on-macos/ target=_blank rel="noopener noreferrer">https://opencredo.com/blogs/building-the-best-kubernetes-test-cluster-on-macos/</a></li></ul><h2 id=ãã®ä»–>ãã®ä»–<a class="anchor ms-1" href=#ãã®ä»–><i class="fas fa-link"></i></a></h2><h3 id=errors-with-colima>Errors with colima<a class="anchor ms-1" href=#errors-with-colima><i class="fas fa-link"></i></a></h3><p>kindã‚’ä½¿ã£ã¦kubernetes clusterã‚’ä½œã‚‹æ™‚ã€ä¸‹è¨˜ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ kind create cluster       
</span></span><span style=display:flex><span>Creating cluster <span style=color:#e6db74>&#34;kind&#34;</span> ...
</span></span><span style=display:flex><span> âœ“ Ensuring node image <span style=color:#f92672>(</span>kindest/node:v1.27.3<span style=color:#f92672>)</span> ğŸ–¼ 
</span></span><span style=display:flex><span> âœ— Preparing nodes ğŸ“¦  
</span></span><span style=display:flex><span>Deleted nodes: <span style=color:#f92672>[</span><span style=color:#e6db74>&#34;kind-control-plane&#34;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>ERROR: failed to create cluster: command <span style=color:#e6db74>&#34;docker run --name kind-control-plane --hostname kind-control-plane --label io.x-k8s.kind.role=control-plane --privileged --security-opt seccomp=unconfined --security-opt apparmor=unconfined --tmpfs /tmp --tmpfs /run --volume /var --volume /lib/modules:/lib/modules:ro -e KIND_EXPERIMENTAL_CONTAINERD_SNAPSHOTTER --detach --tty --label io.x-k8s.kind.cluster=kind --net kind --restart=on-failure:1 --init=false --cgroupns=private --publish=127.0.0.1:57848:6443/TCP -e KUBECONFIG=/etc/kubernetes/admin.conf kindest/node:v1.27.3@sha256:3966ac761ae0136263ffdb6cfd4db23ef8a83cba8a463690e98317add2c9ba72&#34;</span> failed with error: exit status <span style=color:#ae81ff>125</span>
</span></span><span style=display:flex><span>Command Output: 8a9ea5e5f1310b7afd801ef35ec105ce9b69c585a9ac1e343c8bfecb42ef3577
</span></span><span style=display:flex><span>docker: Error response from daemon: failed to create shim task: OCI runtime create failed: runc create failed: unable to start container process: error during container init: error mounting <span style=color:#e6db74>&#34;cgroup&#34;</span> to rootfs at <span style=color:#e6db74>&#34;/sys/fs/cgroup&#34;</span>: mount cgroup:/sys/fs/cgroup/openrc <span style=color:#f92672>(</span>via /proc/self/fd/7<span style=color:#f92672>)</span>, flags: 0xe, data: openrc: invalid argument: unknown.
</span></span></code></pre></div><p><a href=https://github.com/kubernetes-sigs/kind/issues/3277 target=_blank rel="noopener noreferrer">ã“ã®å•é¡Œ</a>ã¯ã€colimaã§ç”Ÿæˆã™ã‚‹VMã§cgroup v2ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ãªã„ã®ã§ç™ºç”Ÿã™ã‚‹å•é¡Œã ã¨æ€ã‚ã‚Œã¾ã™ã€‚é–¢é€£PRãŒmergeã•ã‚Œã¦ãªã„<code>0.19.0</code>ã§ã¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãªã„ã¨ã„ã†<a href=https://github.com/kubernetes-sigs/kind/issues/3277#issuecomment-1643943889 target=_blank rel="noopener noreferrer">ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¦‹</a>ã¦ <code>0.19.0</code>binaryã‚’ç›´æ¥ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚‰å•é¡Œãªãkind clusterãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸã€‚</p></div></div><div class=card-footer><div class="post-navs d-flex justify-content-evenly"><div class="post-nav post-prev"><i class="fas fa-fw fa-chevron-left"></i>
<a href=https://evir35.github.io/ja/posts/podman-release-4/>Podman 4.0.0 release</a></div><div class="post-nav post-next"><a href=https://evir35.github.io/ja/posts/tryout-deno/>Tryout Deno</a>
<i class="fas fa-fw fa-chevron-right"></i></div></div></div></article><section class="related-posts row card component"><div class=card-header><h2 class=card-title>Related Posts</h2></div><div class=card-body><ul class=post-list><li><a href=https://evir35.github.io/ja/posts/podman-release-4/>Podman 4.0.0 release</a>
<span class="float-end post-date">3æœˆ 21, 2022</span></li><li><a href=https://evir35.github.io/ja/posts/docker-alternatives-podman/>Podmanã‚’å§‹ã‚ã‚‹</a>
<span class="float-end post-date">2æœˆ 20, 2022</span></li></ul></div></section><div class="card component row post-comments" id=post-comments><div class=card-header><h2 class=card-title>Comments</h2></div><div class=card-body><script src=https://utteranc.es/client.js repo=evir35/evir35.github.io issue-term=pathname label=comment theme=github-light crossorigin=anonymous async></script></div></div></div></div><aside class="col-lg-4 sidebar d-flex"><div class="container d-flex flex-column"><section class="card row text-center profile component"><div class=card-body><div class="col-12 d-flex align-items-center justify-content-center"><img class="profile-avatar rounded-circle" alt=evir35 src=https://evir35.github.io/images/profile.webp loading=lazy width=600 height=600></div><div class="col-12 profile-meta"><div class=profile-name>evir35</div><div class=profile-bio>Cloud Engineer</div><div class=profile-location><i class="fas fa-fw fa-map-marker-alt"></i>Republic of Korea</div></div></div></section><div class="post-toc row mb-4 card component" id=postTOC><div class=card-header><h2 class=card-title>Contents</h2></div><div class=card-body><nav id=TableOfContents><ul><li><a href=#kindã§kubernetes-clusterã‚’localã§å‹•ã‹ã™æ–¹æ³•>Kindã§Kubernetes clusterã‚’localã§å‹•ã‹ã™æ–¹æ³•</a></li><li><a href=#ç’°å¢ƒè¨­å®š>ç’°å¢ƒè¨­å®š</a></li><li><a href=#install-kind>Install kind</a><ul><li><a href=#check-kind-cli>Check kind CLI</a></li></ul></li><li><a href=#create-cluster>Create Cluster</a><ul><li><a href=#kubernetes-cluster-info-and-nodesã®ç¢ºèª>kubernetes cluster-info and nodesã®ç¢ºèª</a></li><li><a href=#check-docker-containers>Check docker containers</a></li></ul></li><li><a href=#metallbã§kindç”¨ã®loadbalancerã‚’è¨­å®šã™ã‚‹>metalLBã§kindç”¨ã®LoadBalancerã‚’è¨­å®šã™ã‚‹</a><ul><li><a href=#dockerãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç”¨ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«ã®è¨­å®š>dockerãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç”¨ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«ã®è¨­å®š</a></li><li><a href=#install-metallb-on-kind-cluster>Install metalLB on kind cluster</a></li><li><a href=#docker-kind-network-ip-rangeç¢ºèª>Docker kind network IP rangeç¢ºèª</a></li><li><a href=#metallb-ip-rangeè¨­å®š>MetalLB IP rangeè¨­å®š</a></li><li><a href=#metallb-loadbalancerã‚’ä½¿ã†example-resourceã‚’ç”Ÿæˆã—ã¾ã™>MetalLB LoadBalancerã‚’ä½¿ã†example resourceã‚’ç”Ÿæˆã—ã¾ã™ã€‚</a></li><li><a href=#test-metallb>Test metalLB</a></li></ul></li><li><a href=#conclusion>Conclusion</a></li><li><a href=#reference>Reference</a></li><li><a href=#ãã®ä»–>ãã®ä»–</a><ul><li><a href=#errors-with-colima>Errors with colima</a></li></ul></li></ul></nav></div></div><section class="recent-posts row card component"><div class=card-header><h2 class=card-title>Recent Posts</h2></div><div class=card-body><ul class=post-list><li><a href=https://evir35.github.io/ja/posts/tryout-deno/>Tryout Deno</a></li><li><a href=https://evir35.github.io/ja/posts/kind-setup-k8s-on-local/>Kindã§kubernetes clusterã‚’localã§å‹•ã‹ã™æ–¹æ³•</a></li><li><a href=https://evir35.github.io/ja/posts/podman-release-4/>Podman 4.0.0 release</a></li><li><a href=https://evir35.github.io/ja/posts/docker-alternatives-podman/>Podmanã‚’å§‹ã‚ã‚‹</a></li></ul></div></section><section class="tags-taxonomies row card component"><div class=card-header><h2 class=card-title><a href=https://evir35.github.io/ja/tags>Tags</a></h2></div><div class=card-body><div class=py-2><a href=https://evir35.github.io/ja/tags/container/ class="badge rounded post-taxonomy" title=container>container</a><a href=https://evir35.github.io/ja/tags/docker/ class="badge rounded post-taxonomy" title=docker>
docker</a><a href=https://evir35.github.io/ja/tags/podman/ class="badge rounded post-taxonomy" title=podman>
podman</a><a href=https://evir35.github.io/ja/tags/deno/ class="badge rounded post-taxonomy" title=deno>
deno</a><a href=https://evir35.github.io/ja/tags/kind/ class="badge rounded post-taxonomy" title=kind>
kind</a><a href=https://evir35.github.io/ja/tags/kubernetes/ class="badge rounded post-taxonomy" title=kubernetes>
kubernetes</a><a href=https://evir35.github.io/ja/tags/typescript/ class="badge rounded post-taxonomy" title=typescript>
typescript</a></div></div></section></div></aside></div></main><footer class="footer mt-auto py-3 text-center container"><nav class="social-links nav justify-content-center mb-2"><a class="nav-link social-link" href=mailto:evir35@gmail.com title=Email><i class="fas fa-fw fa-2x fa-envelope"></i>
</a><a class="nav-link social-link" target=_blank href=https://github.com/evir35 title=GitHub rel="noopener noreferrer"><i class="fa-fw fa-2x fab fa-github"></i>
</a><a class="nav-link social-link" target=_blank href=https://linkedin.com/in/minhyeok-park-23316a1ba title=LinkedIn rel="noopener noreferrer"><i class="fa-fw fa-2x fab fa-linkedin-in"></i></a></nav><div class="copyright mb-2">Copyright Â© 2022 - 2023 evir35. All Rights Reserved.</div><div class="powered-by mb-2">Powered by <a href=https://gohugo.io target=_blank rel="noopener noreferrer">Hugo</a> and the <a href=https://github.com/razonyang/hugo-theme-bootstrap target=_blank rel="noopener noreferrer">Bootstrap</a> theme.</div></footer><script src=https://evir35.github.io/js/main.e9c59f86e964245833b4657c9db847e00947850b3482e31244375a4479b54224.js integrity="sha256-6cWfhulkJFgztGV8nbhH4AlHhQs0guMSRDdaRHm1QiQ=" crossorigin=anonymous defer></script><script src=https://evir35.github.io/js/icons.min.51c35406c902d10a8c727cd65bc98c32b447950c5cde90210eb346a8fa006756.js integrity="sha256-UcNUBskC0QqMcnzWW8mMMrRHlQxc3pAhDrNGqPoAZ1Y=" crossorigin=anonymous defer></script>
<script src=https://evir35.github.io/js/viewer.min.a8208be3aa935702a4db52cc84efb041977103ab64919b01a6117fc574b0628f.js integrity="sha256-qCCL46qTVwKk21LMhO+wQZdxA6tkkZsBphF/xXSwYo8=" crossorigin=anonymous defer></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-S7LE5396CB"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-S7LE5396CB",{anonymize_ip:!1})}</script></body></html>